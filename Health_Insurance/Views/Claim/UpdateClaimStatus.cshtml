@model Health_Insurance.Models.Claim
@* Ensure the model namespace is correct based on your project name *@

@{
    ViewData["Title"] = "Update Claim Status";
}

<style>
    /* Color Palette Variables */
    :root {
        --primary-green-dark: #4B5945; /* Darkest Green */
        --primary-green-medium-dark: #66785F; /* Medium Dark Green */
        --primary-green-medium-light: #91AC8F; /* Medium Light Green */
        --primary-green-light: #B2C9AD; /* Lightest Green */
        --neutral-dark-text: #343a40;
        --neutral-light-bg: #f4f7f6; /* Original light gray background */
        --subtle-border: #e9ecef;
    }

    /* General body and dashboard container styles */
    body {
        background-color: var(--neutral-light-bg);
        font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        color: var(--neutral-dark-text);
    }

    .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding: 20px;
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

        .dashboard-header h1 {
            margin: 0;
            color: var(--primary-green-dark); /* Styled with darkest green */
            font-size: 2em;
            font-weight: 600;
        }

    .dashboard-card {
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        margin-bottom: 30px;
        overflow: hidden;
        border: 1px solid var(--primary-green-light); /* Styled with lightest green border */
    }

    .dashboard-card-header {
        padding: 20px;
        border-bottom: 1px solid var(--primary-green-light); /* Styled with lightest green border */
        background-color: var(--primary-green-medium-light); /* Styled with medium light green background */
    }

    .dashboard-card-title {
        margin: 0;
        font-size: 1.5em;
        color: var(--primary-green-dark); /* Styled with darkest green */
    }

    .dashboard-card-body {
        padding: 20px;
    }

    /* Form specific styles */
    .form-group .form-label {
        font-weight: 600;
        color: var(--primary-green-medium-dark); /* Labels styled with medium dark green */
        margin-bottom: 5px;
    }

    .form-control {
        border-radius: 8px;
        border: 1px solid var(--primary-green-light); /* Border in light green */
        padding: 10px 15px;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.03);
        transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

        .form-control:focus {
            border-color: var(--primary-green-medium-dark); /* Medium dark green on focus */
            box-shadow: 0 0 0 0.25rem rgba(102, 120, 95, 0.25); /* Subtle shadow tint from medium dark green */
            outline: 0;
        }

    /* Styling for disabled form controls */
    fieldset:disabled .form-control {
        background-color: rgba(178, 201, 173, 0.3); /* Lighter green with transparency for disabled inputs */
        border-color: var(--primary-green-light);
        color: var(--primary-green-dark); /* Dark green text for disabled inputs */
        opacity: 1; /* Ensure full opacity for text readability */
        cursor: not-allowed;
    }

    hr {
        border-top: 1px solid var(--primary-green-light); /* Styled the HR with light green */
    }

    /* Primary "Update Status" button */
    .dashboard-btn-primary {
        background-color: var(--primary-green-dark); /* Darkest green for update button */
        border-color: var(--primary-green-dark);
        color: #fff;
        padding: 8px 15px;
        font-size: 0.9em;
        border-radius: 5px;
        transition: all 0.3s ease;
    }

        .dashboard-btn-primary:hover {
            background-color: var(--primary-green-medium-dark); /* Medium dark green on hover */
            border-color: var(--primary-green-medium-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(75, 89, 69, 0.2); /* Shadow tinted with darkest green */
        }

        .dashboard-btn-primary i {
            margin-right: 8px;
        }

    /* MODERN ACTION BUTTONS (Back to List, Back to Details) */
    .modern-action-btn {
        padding: 8px 12px;
        font-size: 0.85em;
        border-radius: 5px;
        transition: all 0.3s ease;
        margin: 0 4px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background-color: transparent; /* Ensure transparent background by default */
    }

        /* Specific colors for outline buttons */
        .modern-action-btn.btn-outline-secondary {
            color: var(--primary-green-medium-dark); /* Text in medium dark green */
            border: 1px solid var(--primary-green-medium-dark); /* Border in medium dark green */
        }

        .modern-action-btn.btn-outline-info {
            color: var(--primary-green-medium-dark); /* Using medium dark green for 'info' button text */
            border: 1px solid var(--primary-green-medium-dark); /* Using medium dark green for 'info' button border */
        }

        /* Hover effect: fill the button with its color */
        .modern-action-btn.btn-outline-secondary:hover {
            background-color: var(--primary-green-medium-dark); /* Medium dark green background on hover */
            color: #fff; /* White text on hover */
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(102, 120, 95, 0.3); /* Shadow tinted with medium dark green */
        }

        .modern-action-btn.btn-outline-info:hover {
            background-color: var(--primary-green-dark); /* Darker green for 'info' button hover */
            color: #fff;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(75, 89, 69, 0.3); /* Shadow tinted with darkest green */
        }

        /* Icon spacing for action buttons */
        .modern-action-btn i {
            margin-right: 5px;
        }

    /* Spacing for button group */
    .button-group-spacing .btn {
        margin-right: 10px;
    }

        .button-group-spacing .btn:last-child {
            margin-right: 0;
        }

    /* Validation summary and messages */
    .text-danger {
        color: #dc3545 !important; /* Keep standard red for validation messages */
    }
</style>

<div class="dashboard-header">
    <h1>@ViewData["Title"]</h1>
</div>

<div class="dashboard-card">
    <div class="dashboard-card-header">
        <h2 class="dashboard-card-title">Claim #@Model.ClaimId Details</h2>
    </div>
    <div class="dashboard-card-body">
        <hr class="mb-4" /> @* Added margin-bottom for spacing *@

        <div class="row">
            <div class="col-md-7">
                @* Adjusted column width for slightly wider form *@
                @* Form for updating claim status. Posts data to the UpdateClaimStatus action. *@
                <form asp-action="UpdateClaimStatus" method="post">
                    @Html.AntiForgeryToken() @* Hidden field for CSRF protection *@

                    @* Hidden input for the ClaimId, needed to identify which claim is being updated *@
                    <input type="hidden" name="id" value="@Model.ClaimId" /> @* Changed to name="id" to match controller parameter *@

                    @* Validation summary with Bootstrap text-danger class *@
                    <div asp-validation-summary="ModelOnly" class="text-danger mb-4"></div> @* Increased margin-bottom *@

                    @* Display current claim details (read-only) for context *@
                    <fieldset disabled>
                        @* Group read-only fields for disabled styling *@
                        <div class="form-group mb-3">
                            <label asp-for="EnrollmentId" class="form-label"></label>
                            <input asp-for="EnrollmentId" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="ClaimAmount" class="form-label"></label>
                            <input asp-for="ClaimAmount" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="ClaimDate" class="form-label"></label>
                            <input asp-for="ClaimDate" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="ClaimReason" class="form-label"></label>
                            <textarea asp-for="ClaimReason" class="form-control"></textarea>
                        </div>
                        <div class="form-group mb-3">
                            <label class="form-label">Current Status:</label>
                            <input value="@Model.ClaimStatus" class="form-control" />
                        </div>
                    </fieldset>


                    @* Dropdown for selecting the NEW status *@
                    <div class="form-group mb-4 mt-3">
                        @* Added margin-top for spacing from read-only fields *@
                        <label asp-for="ClaimStatus" class="form-label">Select New Status:</label>
                        <select id="ClaimStatus" name="ClaimStatus" class="form-control" asp-items="ViewBag.Statuses">
                            <option value="">-- Select New Status --</option>
                        </select>
                        <span asp-validation-for="ClaimStatus" class="text-danger mt-1 d-block"></span> @* d-block for better spacing *@
                    </div>


                    <div class="form-group mt-4 button-group-spacing">
                        @* Added margin-top and button spacing class *@
                        <input type="submit" value="Update Status" class="btn btn-primary dashboard-btn-primary" /> @* Styled button *@
                        <a asp-action="ListAllClaims" class="btn btn-outline-secondary modern-action-btn ms-2">
                            @* Styled back button *@
                            <i class="fas fa-arrow-left"></i> Back to List
                        </a>
                        <a asp-action="Details" asp-route-id="@Model.ClaimId" class="btn btn-outline-info modern-action-btn ms-2">
                            @* Back to details with style *@
                            <i class="fas fa-info-circle"></i> Back to Details
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}